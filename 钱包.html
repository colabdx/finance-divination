
<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>å…¨çƒæŠ•èµ„çš„é’±åŒ… - ç½‘é¡µç‰ˆ</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: 'Arial', 'Microsoft YaHei', sans-serif;
		}
		
		body {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			display: flex;
			justify-content: center;
			align-items: center;
			padding: 20px;
		}
		
		.wallet-container {
			background: white;
			border-radius: 20px;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
			width: 100%;
			max-width: 500px;
			padding: 30px;
			position: relative;
			overflow: hidden;
		}
		
		.wallet-header {
			text-align: center;
			margin-bottom: 30px;
			position: relative;
		}
		
		.wallet-header h1 {
			color: #333;
			font-size: 28px;
			font-weight: bold;
			margin-bottom: 10px;
		}
		
		.balance-display {
			background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
			color: white;
			padding: 20px;
			border-radius: 15px;
			margin: 20px 0;
			text-align: center;
		}
		
		.balance-amount {
			font-size: 36px;
			font-weight: bold;
			margin: 10px 0;
		}
		
		.button-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 15px;
			margin: 25px 0;
		}
		
		.btn {
			padding: 15px;
			border: none;
			border-radius: 12px;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
		}
		
		.btn-primary {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
		}
		
		.btn-secondary {
			background: #f0f2f5;
			color: #333;
		}
		
		.btn:hover {
			transform: translateY(-3px);
			box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
		}
		
		.bind-status {
			background: #f8f9fa;
			padding: 20px;
			border-radius: 12px;
			margin: 20px 0;
			border-left: 5px solid #667eea;
		}
		
		.bind-status h3 {
			color: #333;
			margin-bottom: 15px;
			font-size: 18px;
		}
		
		.bind-item {
			display: flex;
			justify-content: space-between;
			padding: 8px 0;
			border-bottom: 1px solid #eee;
		}
		
		.bind-item:last-child {
			border-bottom: none;
		}
		
		.status-badge {
			padding: 4px 12px;
			border-radius: 20px;
			font-size: 14px;
			font-weight: 600;
		}
		
		.status-bound {
			background: #d4edda;
			color: #155724;
		}
		
		.status-unbound {
			background: #f8d7da;
			color: #721c24;
		}
		
		.transaction-log {
			margin-top: 30px;
		}
		
		.transaction-log h3 {
			color: #333;
			margin-bottom: 15px;
			font-size: 18px;
			border-bottom: 2px solid #667eea;
			padding-bottom: 8px;
		}
		
		.log-container {
			background: #f8f9fa;
			border-radius: 12px;
			padding: 15px;
			height: 200px;
			overflow-y: auto;
			border: 1px solid #dee2e6;
		}
		
		.log-entry {
			padding: 10px;
			background: white;
			margin-bottom: 8px;
			border-radius: 8px;
			border-left: 4px solid #667eea;
			font-size: 14px;
			box-shadow: 0 2px 4px rgba(0,0,0,0.05);
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		
		.log-details {
			flex: 1;
		}
		
		.log-actions {
			margin-left: 10px;
		}
		
		.btn-receipt {
			padding: 4px 12px;
			background: #28a745;
			color: white;
			border: none;
			border-radius: 4px;
			font-size: 12px;
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.btn-receipt:hover {
			background: #218838;
			transform: translateY(-1px);
		}
		
		.modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
			z-index: 1000;
			justify-content: center;
			align-items: center;
		}
		
		.modal-content {
			background: white;
			padding: 30px;
			border-radius: 20px;
			width: 90%;
			max-width: 400px;
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
		}
		
		.modal-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
		}
		
		.modal-header h2 {
			color: #333;
			font-size: 22px;
		}
		
		.close-btn {
			background: none;
			border: none;
			font-size: 24px;
			cursor: pointer;
			color: #666;
		}
		
		.radio-group {
			margin: 20px 0;
		}
		
		.radio-item {
			display: flex;
			align-items: center;
			padding: 12px;
			margin: 8px 0;
			background: #f8f9fa;
			border-radius: 10px;
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.radio-item:hover {
			background: #e9ecef;
		}
		
		.radio-item input {
			margin-right: 12px;
			transform: scale(1.2);
		}
		
		.input-group {
			margin: 20px 0;
		}
		
		.input-group label {
			display: block;
			margin-bottom: 8px;
			color: #333;
			font-weight: 600;
		}
		
		.input-group input {
			width: 100%;
			padding: 12px;
			border: 2px solid #dee2e6;
			border-radius: 10px;
			font-size: 16px;
			transition: border-color 0.3s ease;
		}
		
		.input-group input:focus {
			outline: none;
			border-color: #667eea;
		}
		
		.modal-actions {
			display: flex;
			gap: 15px;
			margin-top: 25px;
		}
		
		.modal-btn {
			flex: 1;
			padding: 12px;
			border: none;
			border-radius: 10px;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.modal-btn-confirm {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
		}
		
		.modal-btn-cancel {
			background: #6c757d;
			color: white;
		}
		
		.modal-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
		}
		
		.notification {
			position: fixed;
			top: 20px;
			right: 20px;
			padding: 15px 25px;
			border-radius: 10px;
			color: white;
			font-weight: 600;
			z-index: 1001;
			animation: slideIn 0.3s ease;
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
		}
		
		.notification-success {
			background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
		}
		
		.notification-warning {
			background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
		}
		
		.notification-error {
			background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
		}
		
		.receipt-modal .modal-content {
			max-width: 350px;
			padding: 25px;
		}
		
		.receipt-container {
			background: white;
			border: 2px dashed #dee2e6;
			border-radius: 10px;
			padding: 20px;
			margin: 20px 0;
			font-family: 'Courier New', monospace;
		}
		
		.receipt-header {
			text-align: center;
			margin-bottom: 15px;
			padding-bottom: 10px;
			border-bottom: 1px solid #dee2e6;
		}
		
		.receipt-header h3 {
			color: #333;
			font-size: 18px;
			margin-bottom: 5px;
		}
		
		.receipt-item {
			display: flex;
			justify-content: space-between;
			margin: 8px 0;
			font-size: 14px;
		}
		
		.receipt-label {
			color: #666;
		}
		
		.receipt-value {
			color: #333;
			font-weight: 600;
		}
		
		.receipt-divider {
			height: 1px;
			background: #dee2e6;
			margin: 15px 0;
		}
		
		.receipt-footer {
			text-align: center;
			margin-top: 15px;
			color: #666;
			font-size: 12px;
		}
		
		@keyframes slideIn {
			from {
				transform: translateX(100%);
				opacity: 0;
			}
			to {
				transform: translateX(0);
				opacity: 1;
			}
		}
		
		@media (max-width: 600px) {
			.wallet-container {
				padding: 20px;
			}
			
			.button-grid {
				grid-template-columns: 1fr;
			}
			
			.balance-amount {
				font-size: 28px;
			}
			
			.log-entry {
				flex-direction: column;
				align-items: flex-start;
			}
			
			.log-actions {
				margin-left: 0;
				margin-top: 8px;
				align-self: flex-end;
			}
		}
	</style>
</head>
<body>
	<div class="wallet-container">
		<div class="wallet-header">
			<h1>ğŸ’° é’±åŒ…å……å€¼æ— é™åˆ¶</h1>
			<p>ç½‘é¡µç‰ˆ - è½»æ¾ç®¡ç†æ‚¨çš„èµ„é‡‘</p>
		</div>
		
		<div class="balance-display">
			<p>å½“å‰ä½™é¢</p>
			<div class="balance-amount" id="balanceAmount">ï¿¥30,000.00</div>
			<p>åˆå§‹èµ„é‡‘ï¼š30,000å…ƒäººæ°‘å¸</p>
		</div>
		
		<div class="button-grid">
			<button class="btn btn-primary" onclick="openBindModal()">
				<span>ğŸ”—</span> ç»‘å®šæ”¯ä»˜æ–¹å¼
			</button>
			<button class="btn btn-primary" onclick="openWithdrawModal()">
				<span>ğŸ’³</span> æç°åˆ°é“¶è¡Œå¡
			</button>
			<button class="btn btn-secondary" onclick="openDepositModal()">
				<span>â•</span> å……å€¼
			</button>
			<button class="btn btn-secondary" onclick="showWalletInfo()">
				<span>â„¹ï¸</span> æŸ¥çœ‹é’±åŒ…ä¿¡æ¯
			</button>
		</div>
		
		<div class="bind-status">
			<h3>å·²ç»‘å®šæ”¯ä»˜æ–¹å¼</h3>
			<div class="bind-item">
				<span>æ”¯ä»˜å®</span>
				<span class="status-badge status-unbound" id="alipayStatus">æœªç»‘å®š</span>
			</div>
			<div class="bind-item">
				<span>å¾®ä¿¡æ”¯ä»˜</span>
				<span class="status-badge status-unbound" id="wechatStatus">æœªç»‘å®š</span>
			</div>
			<div class="bind-item">
				<span>é“¶è¡Œå¡</span>
				<span class="status-badge status-unbound" id="bankStatus">æœªç»‘å®š</span>
			</div>
		</div>
		
		<div class="transaction-log">
			<h3>ğŸ“ äº¤æ˜“è®°å½•</h3>
			<div class="log-container" id="transactionLog">
				<div class="log-entry">
					<div class="log-details">ç³»ç»Ÿå¯åŠ¨ - åˆå§‹ä½™é¢ï¼šï¿¥30,000.00</div>
				</div>
			</div>
		</div>
	</div>

	<!-- ç»‘å®šæ”¯ä»˜æ–¹å¼æ¨¡æ€æ¡† -->
	<div class="modal" id="bindModal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>ç»‘å®šæ”¯ä»˜æ–¹å¼</h2>
				<button class="close-btn" onclick="closeBindModal()">Ã—</button>
			</div>
			<p>è¯·é€‰æ‹©è¦ç»‘å®šçš„æ”¯ä»˜æ–¹å¼ï¼š</p>
			<div class="radio-group">
				<label class="radio-item">
					<input type="radio" name="bindService" value="æ”¯ä»˜å®" checked>
					<span>æ”¯ä»˜å®</span>
				</label>
				<label class="radio-item">
					<input type="radio" name="bindService" value="å¾®ä¿¡">
					<span>å¾®ä¿¡æ”¯ä»˜</span>
				</label>
				<label class="radio-item">
					<input type="radio" name="bindService" value="é“¶è¡Œå¡">
					<span>é“¶è¡Œå¡</span>
				</label>
			</div>
			<div class="modal-actions">
				<button class="modal-btn modal-btn-cancel" onclick="closeBindModal()">å–æ¶ˆ</button>
				<button class="modal-btn modal-btn-confirm" onclick="confirmBind()">ç¡®è®¤ç»‘å®š</button>
			</div>
		</div>
	</div>

	<!-- æç°æ¨¡æ€æ¡† -->
	<div class="modal" id="withdrawModal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>æç°åˆ°é“¶è¡Œå¡</h2>
				<button class="close-btn" onclick="closeWithdrawModal()">Ã—</button>
			</div>
			<div class="input-group">
				<label for="withdrawAmount">æç°é‡‘é¢ï¼ˆå…ƒï¼‰</label>
				<input type="number" id="withdrawAmount" placeholder="è¯·è¾“å…¥æç°é‡‘é¢" min="0" step="0.01">
			</div>
			<div class="input-group">
				<label for="bankAccount">é“¶è¡Œå¡å·</label>
				<input type="text" id="bankAccount" placeholder="è¯·è¾“å…¥é“¶è¡Œå¡å·">
			</div>
			<div class="modal-actions">
				<button class="modal-btn modal-btn-cancel" onclick="closeWithdrawModal()">å–æ¶ˆ</button>
				<button class="modal-btn modal-btn-confirm" onclick="confirmWithdraw()">ç¡®è®¤æç°</button>
			</div>
		</div>
	</div>

	<!-- å……å€¼æ¨¡æ€æ¡† -->
	<div class="modal" id="depositModal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>å……å€¼</h2>
				<button class="close-btn" onclick="closeDepositModal()
				<button class="close-btn" onclick="closeDepositModal()">Ã—</button>
			</div>
			<div class="input-group">
				<label for="depositAmount">å……å€¼é‡‘é¢ï¼ˆå…ƒï¼‰</label>
				<input type="number" id="depositAmount" placeholder="è¯·è¾“å…¥å……å€¼é‡‘é¢" min="0" step="0.01">
			</div>
			<div class="radio-group">
				<label class="radio-item">
					<input type="radio" name="depositMethod" value="æ”¯ä»˜å®" checked>
					<span>æ”¯ä»˜å®</span>
				</label>
				<label class="radio-item">
					<input type="radio" name="depositMethod" value="å¾®ä¿¡">
					<span>å¾®ä¿¡æ”¯ä»˜</span>
				</label>
				<label class="radio-item">
					<input type="radio" name="depositMethod" value="é“¶è¡Œå¡">
					<span>é“¶è¡Œå¡</span>
				</label>
			</div>
			<div class="modal-actions">
				<button class="modal-btn modal-btn-cancel" onclick="closeDepositModal()">å–æ¶ˆ</button>
				<button class="modal-btn modal-btn-confirm" onclick="confirmDeposit()">ç¡®è®¤å……å€¼</button>
			</div>
		</div>
	</div>

	<!-- é’±åŒ…ä¿¡æ¯æ¨¡æ€æ¡† -->
	<div class="modal" id="infoModal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>é’±åŒ…ä¿¡æ¯</h2>
				<button class="close-btn" onclick="closeInfoModal()">Ã—</button>
			</div>
			<div class="bind-status">
				<div class="bind-item">
					<span>é’±åŒ…ä½™é¢</span>
					<span id="infoBalance">ï¿¥30,000.00</span>
				</div>
				<div class="bind-item">
					<span>æ”¯ä»˜å®ç»‘å®šçŠ¶æ€</span>
					<span id="infoAlipay">æœªç»‘å®š</span>
				</div>
				<div class="bind-item">
					<span>å¾®ä¿¡æ”¯ä»˜ç»‘å®šçŠ¶æ€</span>
					<span id="infoWechat">æœªç»‘å®š</span>
				</div>
				<div class="bind-item">
					<span>é“¶è¡Œå¡ç»‘å®šçŠ¶æ€</span>
					<span id="infoBank">æœªç»‘å®š</span>
				</div>
			</div>
			<div class="modal-actions">
				<button class="modal-btn modal-btn-confirm" onclick="closeInfoModal()">ç¡®å®š</button>
			</div>
		</div>
	</div>

	<!-- æç°å°ç¥¨æ¨¡æ€æ¡† -->
	<div class="modal receipt-modal" id="receiptModal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>æç°å°ç¥¨</h2>
				<button class="close-btn" onclick="closeReceiptModal()">Ã—</button>
			</div>
			<div class="receipt-container" id="receiptContent">
				<div class="receipt-header">
					<h3>å…¨çƒæŠ•èµ„é’±åŒ…</h3>
					<p>ç”µå­æç°å‡­è¯</p>
				</div>
				<div class="receipt-item">
					<span class="receipt-label">äº¤æ˜“ç¼–å·ï¼š</span>
					<span class="receipt-value" id="receiptId">WD20230001</span>
				</div>
				<div class="receipt-item">
					<span class="receipt-label">äº¤æ˜“æ—¶é—´ï¼š</span>
					<span class="receipt-value" id="receiptTime">2023-01-01 10:30:00</span>
				</div>
				<div class="receipt-divider"></div>
				<div class="receipt-item">
					<span class="receipt-label">æç°é‡‘é¢ï¼š</span>
					<span class="receipt-value" id="receiptAmount">ï¿¥0.00</span>
				</div>
				<div class="receipt-item">
					<span class="receipt-label">æ‰‹ç»­è´¹ï¼š</span>
					<span class="receipt-value" id="receiptFee">ï¿¥0.00</span>
				</div>
				<div class="receipt-item">
					<span class="receipt-label">å®åˆ°é‡‘é¢ï¼š</span>
					<span class="receipt-value" id="receiptNetAmount">ï¿¥0.00</span>
				</div>
				<div class="receipt-divider"></div>
				<div class="receipt-item">
					<span class="receipt-label">æ”¶æ¬¾é“¶è¡Œï¼š</span>
					<span class="receipt-value" id="receiptBank">æœªæŒ‡å®š</span>
				</div>
				<div class="receipt-item">
					<span class="receipt-label">æ”¶æ¬¾è´¦å·ï¼š</span>
					<span class="receipt-value" id="receiptAccount">**** **** **** 0000</span>
				</div>
				<div class="receipt-item">
					<span class="receipt-label">äº¤æ˜“çŠ¶æ€ï¼š</span>
					<span class="receipt-value" id="receiptStatus">å·²å®Œæˆ</span>
				</div>
				<div class="receipt-divider"></div>
				<div class="receipt-footer">
					<p>æ­¤å‡­è¯å¯ä½œä¸ºäº¤æ˜“è¯æ˜</p>
					<p>å®¢æœç”µè¯ï¼š400-805-0255</p>
				</div>
			</div>
			<div class="modal-actions">
				<button class="modal-btn modal-btn-confirm" onclick="printReceipt()">æ‰“å°å°ç¥¨</button>
				<button class="modal-btn modal-btn-cancel" onclick="closeReceiptModal()">å…³é—­</button>
			</div>
		</div>
	</div>

	<script>
		// NOTE: åˆå§‹åŒ–é’±åŒ…æ•°æ®
		let walletData = {
			balance: 30000.00,
			alipayBound: false,
			wechatBound: false,
			bankBound: false,
			transactions: ['ç³»ç»Ÿå¯åŠ¨ - åˆå§‹ä½™é¢ï¼šï¿¥30,000.00'],
			// NOTE: æ–°å¢æç°è®°å½•æ•°ç»„ï¼Œå­˜å‚¨è¯¦ç»†çš„å°ç¥¨ä¿¡æ¯
			withdrawReceipts: []
		};

		// NOTE: æ˜¾ç¤ºé€šçŸ¥å‡½æ•°
		function showNotification(message, type = 'success') {
			const notification = document.createElement('div');
			notification.className = `notification notification-${type}`;
			notification.textContent = message;
			document.body.appendChild(notification);
			
			setTimeout(() => {
				notification.remove();
			}, 3000);
		}

		// NOTE: æ›´æ–°ä½™é¢æ˜¾ç¤º
		function updateBalanceDisplay() {
			document.getElementById('balanceAmount').textContent = `ï¿¥${walletData.balance.toLocaleString('zh-CN', {minimumFractionDigits: 2})}`;
			document.getElementById('infoBalance').textContent = `ï¿¥${walletData.balance.toLocaleString('zh-CN', {minimumFractionDigits: 2})}`;
		}

		// NOTE: æ·»åŠ äº¤æ˜“è®°å½•
		function addTransaction(description, receiptId = null) {
			const timestamp = new Date().toLocaleString('zh-CN');
			const logEntry = `${timestamp} - ${description}`;
			walletData.transactions.unshift(logEntry);
			
			const logContainer = document.getElementById('transactionLog');
			const newEntry = document.createElement('div');
			newEntry.className = 'log-entry';
			
			// NOTE: ä¿®æ”¹æ—¥å¿—æ¡ç›®ç»“æ„ï¼Œæ·»åŠ æŸ¥çœ‹å°ç¥¨æŒ‰é’®
			newEntry.innerHTML = `
				<div class="log-details">${logEntry}</div>
				${receiptId ? `<div class="log-actions"><button class="btn-receipt" onclick="showReceipt('${receiptId}')">æŸ¥çœ‹å°ç¥¨</button></div>` : ''}
			`;
			
			logContainer.insertBefore(newEntry, logContainer.firstChild);
			
			// é™åˆ¶æœ€å¤šæ˜¾ç¤º10æ¡è®°å½•
			if (walletData.transactions.length > 10) {
				walletData.transactions.pop();
				if (logContainer.children.length > 10) {
					logContainer.removeChild(logContainer.lastChild);
				}
			}
		}

		// NOTE: ç”Ÿæˆäº¤æ˜“ç¼–å·
		function generateTransactionId() {
			const now = new Date();
			const year = now.getFullYear();
			const month = String(now.getMonth() + 1).padStart(2, '0');
			const day = String(now.getDate()).padStart(2, '0');
			const random = String(Math.floor(Math.random() * 10000)).padStart(4, '0');
			return `WD${year}${month}${day}${random}`;
		}

		// NOTE: è®¡ç®—æ‰‹ç»­è´¹ï¼ˆæ¨¡æ‹Ÿé“¶è¡Œæ‰‹ç»­è´¹ï¼‰
		function calculateFee(amount) {
			// æ‰‹ç»­è´¹è§„åˆ™ï¼š0-1000å…ƒå…è´¹ï¼Œ1000å…ƒä»¥ä¸Šæ”¶å–0.1%ï¼Œæœ€é«˜50å…ƒ
			if (amount <= 1000) return 0;
			const fee = amount * 0.001;
			return Math.min(fee, 50);
		}

		// NOTE: ç»‘å®šæ”¯ä»˜æ–¹å¼ç›¸å…³å‡½æ•°
		function openBindModal() {
			document.getElementById('bindModal').style.display = 'flex';
		}

		function closeBindModal() {
			document.getElementById('bindModal').style.display = 'none';
		}

		function confirmBind() {
			const selectedService = document.querySelector('input[name="bindService"]:checked').value;
			let statusElement, infoElement;
			
			switch(selectedService) {
				case 'æ”¯ä»˜å®':
					statusElement = document.getElementById('alipayStatus');
					infoElement = document.getElementById('infoAlipay');
					walletData.alipayBound = true;
					break;
				case 'å¾®ä¿¡':
					statusElement = document.getElementById('wechatStatus');
					infoElement = document.getElementById('infoWechat');
					walletData.wechatBound = true;
					break;
				case 'é“¶è¡Œå¡':
					statusElement = document.getElementById('bankStatus');
					infoElement = document.getElementById('infoBank');
					walletData.bankBound = true;
					break;
			}
			
			statusElement.textContent = 'å·²ç»‘å®š';
			statusElement.className = 'status-badge status-bound';
			infoElement.textContent = 'å·²ç»‘å®š';
			
			addTransaction(`ç»‘å®š${selectedService}æ”¯ä»˜æ–¹å¼`);
			showNotification(`${selectedService}ç»‘å®šæˆåŠŸï¼`, 'success');
			closeBindModal();
		}

		// NOTE: æç°ç›¸å…³å‡½æ•°
		function openWithdrawModal() {
			if (!walletData.bankBound) {
				showNotification('è¯·å…ˆç»‘å®šé“¶è¡Œå¡', 'warning');
				return;
			}
			document.getElementById('withdrawAmount').value = '';
			document.getElementById('bankAccount').value = '';
			document.getElementById('withdrawModal').style.display = 'flex';
		}

		function closeWithdrawModal() {
			document.getElementById('withdrawModal').style.display = 'none';
		}

		function confirmWithdraw() {
			const amount = parseFloat(document.getElementById('withdrawAmount').value);
			const bankAccount = document.getElementById('bankAccount').value.trim();
			
			if (!amount || amount <= 0) {
				showNotification('è¯·è¾“å…¥æœ‰æ•ˆçš„æç°é‡‘é¢', 'error');
				return;
			}
			
			if (amount > walletData.balance) {
				showNotification('ä½™é¢ä¸è¶³', 'error');
				return;
			}
			
			if (!bankAccount) {
				showNotification('è¯·è¾“å…¥é“¶è¡Œå¡å·', 'error');
				return;
			}
			
			if (!/^\d{7,24}$/.test(bankAccount)) {
				showNotification('è¯·è¾“å…¥æœ‰æ•ˆçš„é“¶è¡Œå¡å·', 'error');
				return;
			}
			
			// NOTE: è®¡ç®—æ‰‹ç»­è´¹å’Œå®åˆ°é‡‘é¢
			const fee = calculateFee(amount);
			const netAmount = amount - fee;
			
			// NOTE: ç”Ÿæˆäº¤æ˜“ç¼–å·
			const transactionId = generateTransactionId();
			
			// NOTE: æ›´æ–°ä½™é¢
			walletData.balance -= amount;
			updateBalanceDisplay();
			
			// NOTE: åˆ›å»ºå°ç¥¨æ•°æ®å¯¹è±¡
			const receiptData = {
				id: transactionId,
				time: new Date().toLocaleString('zh-CN'),
				amount: amount,
				fee: fee,
				netAmount: netAmount,
				bankAccount: bankAccount,
				bankName: 'æ”¶æ¬¾é“¶è¡Œ', // è¿™é‡Œå¯ä»¥æ‰©å±•ä¸ºæ ¹æ®å¡å·è¯†åˆ«é“¶è¡Œ
				status: 'å·²å®Œæˆ'
			};
			
			// NOTE: ä¿å­˜å°ç¥¨æ•°æ®
			walletData.withdrawReceipts.push(receiptData);
			
			// NOTE: ä¿®æ”¹äº¤æ˜“è®°å½•æè¿°ï¼ŒåŒ…å«å°¾å·å’Œäº¤æ˜“ç¼–å·
			const lastFourDigits = bankAccount.slice(-4);
			addTransaction(`æç°åˆ°é“¶è¡Œå¡(å°¾å·${lastFourDigits})ï¼š-ï¿¥${amount.toFixed(2)} [${transactionId}]`, transactionId);
			
			showNotification(`æˆåŠŸæç°ï¿¥${amount.toFixed(2)}ï¼Œå®åˆ°ï¿¥${netAmount.toFixed(2)}`, 'success');
			closeWithdrawModal();
		}

		// NOTE: å……å€¼ç›¸å…³å‡½æ•°
		function openDepositModal() {
			document.getElementById('depositAmount').value = '';
			document.getElementById('depositModal').style.display = 'flex';
		}

		function closeDepositModal() {
			document.getElementById('depositModal').style.display = 'none';
		}

		function confirmDeposit() {
			const amount = parseFloat(document.getElementById('depositAmount').value);
			const method = document.querySelector('input[name="depositMethod"]:checked').value;
			
			if (!amount || amount <= 0) {
				showNotification('è¯·è¾“å…¥æœ‰æ•ˆçš„å……å€¼é‡‘é¢', 'error');
				return;
			}
			
			walletData.balance += amount;
			updateBalanceDisplay();
			addTransaction(`é€šè¿‡${method}å……å€¼ï¼š+ï¿¥${amount.toFixed(2)}`);
			showNotification(`æˆåŠŸå……å€¼ï¿¥${amount.toFixed(2)}`, 'success');
			closeDepositModal();
		}

		// NOTE: é’±åŒ…ä¿¡æ¯ç›¸å…³å‡½æ•°
		function showWalletInfo() {
			document.getElementById('infoModal').style.display = 'flex';
		}

		function closeInfoModal() {
			document.getElementById('infoModal').style.display = 'none';
		}

		// NOTE: æç°å°ç¥¨ç›¸å…³å‡½æ•°
		function showReceipt(receiptId) {
			// NOTE: æŸ¥æ‰¾å¯¹åº”çš„å°ç¥¨æ•°æ®
			const receipt = walletData.withdrawReceipts.find(r => r.id === receiptId);
			if (!receipt) {
				showNotification('æœªæ‰¾åˆ°å¯¹åº”çš„å°ç¥¨ä¿¡æ¯', 'error');
				return;
			}
			
			// NOTE: å¡«å……å°ç¥¨å†…å®¹
			document.getElementById('receiptId').textContent = receipt.id;
			document.getElementById('receiptTime').textContent = receipt.time;
			document.getElementById('receiptAmount').textContent = `ï¿¥${receipt.amount.toFixed(2)}`;
			document.getElementById('receiptFee').textContent = `ï¿¥${receipt.fee.toFixed(2)}`;
			document.getElementById('receiptNetAmount').textContent = `ï¿¥${receipt.netAmount.toFixed(2)}`;
			document.getElementById('receiptBank').textContent = receipt.bankName;
			document.getElementById('receiptAccount').textContent = `**** **** **** ${receipt.bankAccount.slice(-4)}`;
			document.getElementById('receiptStatus').textContent = receipt.status;
			
			// NOTE: æ˜¾ç¤ºå°ç¥¨æ¨¡æ€æ¡†
			document.getElementById('receiptModal').style.display = 'flex';
		}

		function closeReceiptModal() {
			document.getElementById('receiptModal').style.display = 'none';
		}

		function printReceipt() {
			// NOTE: æ‰“å°å°ç¥¨åŠŸèƒ½
			const receiptContent = document.getElementById('receiptContent').innerHTML;
			const printWindow = window.open('', '_blank');
			printWindow.document.write(`
				<!DOCTYPE html>
				<html>
				<head>
					<title>æç°å°ç¥¨ - æ‰“å°</title>
					<style>
						body { font-family: 'Courier New', monospace; padding: 20px; }
						.receipt-container { border: 1px solid #000; padding: 20px; max-width: 300px; margin: 0 auto; }
						.receipt-header { text-align: center; margin-bottom: 15px; }
						.receipt-item { display: flex; justify-content: space-between; margin: 5px 0; }
						.receipt-divider { border-top: 1px dashed #000; margin: 10px 0; }
						.receipt-footer { text-align: center; font-size: 12px; margin-top: 15px; }
						@media print {
							button { display: none; }
						}
					</style>
				</head>
				<body>
					<div class="receipt-container">
						${receiptContent}
					</div>
					<div style="text-align: center; margin-top: 20px;">
						<button onclick="window.print()">æ‰“å°</button>
						<button onclick="window.close()">å…³é—­</button>
					</div>
				</body>
				</html>
			`);
			printWindow.document.close();
		}

		// NOTE: å…¨å±€ç‚¹å‡»äº‹ä»¶å¤„ç† - ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
		window.onclick = function(event) {
			const modals = document.querySelectorAll('.modal');
			modals.forEach(modal => {
				if (event.target === modal) {
					modal.style.display = 'none';
				}
			});
		}

		// NOTE: é”®ç›˜äº‹ä»¶å¤„ç† - ESCé”®å…³é—­æ¨¡æ€æ¡†
		document.addEventListener('keydown', function(event) {
			if (event.key === 'Escape') {
				const modals = document.querySelectorAll('.modal');
				modals.forEach(modal => {
					if (modal.style.display === 'flex') {
						modal.style.display = 'none';
					}
				});
			}
		});
	</script>
</body>
</html>
